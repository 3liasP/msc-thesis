% generated by Plantuml 1.2025.9       
\definecolor{plantucolor0000}{RGB}{227,242,253}
\definecolor{plantucolor0001}{RGB}{25,118,210}
\definecolor{plantucolor0002}{RGB}{255,255,255}
\definecolor{plantucolor0003}{RGB}{0,0,0}
\begin{tikzpicture}[yscale=-1
,pstyle0/.style={color=plantucolor0001,fill=plantucolor0000,line width=1.0pt}
,pstyle1/.style={color=black,fill=white,line width=1.0pt}
,pstyle2/.style={color=plantucolor0001,line width=1.0pt}
]
\draw[pstyle0] (12pt,52pt) arc (180:270:5pt) -- (17pt,47pt) -- (114.06pt,47pt) arc (270:360:5pt) -- (119.06pt,52pt) -- (119.06pt,106pt) arc (0:90:5pt) -- (114.06pt,111pt) -- (17pt,111pt) arc (90:180:5pt) -- (12pt,106pt) -- cycle;
\draw[pstyle1] (42.8245pt,61pt) ellipse (9pt and 9pt);
\node at (42.8245pt,61pt)[]{\textbf{\Large E}};
\node at (58.7855pt,56pt)[below right,color=black,inner sep=0]{AIConfig};
\draw[pstyle2] (13pt,75pt) -- (118.06pt,75pt);
\draw[pstyle1] (23pt,86pt) ellipse (3pt and 3pt);
\node at (30pt,79.5pt)[below right,color=black,inner sep=0]{key : TEXT \guillemotleft{}PK\guillemotright{}};
\draw[pstyle2] (13pt,93pt) -- (118.06pt,93pt);
\node at (18pt,97pt)[below right,color=black,inner sep=0]{value : TEXT};
\draw[pstyle0] (129pt,52pt) arc (180:270:5pt) -- (134pt,47pt) -- (246.66pt,47pt) arc (270:360:5pt) -- (251.66pt,52pt) -- (251.66pt,106pt) arc (0:90:5pt) -- (246.66pt,111pt) -- (134pt,111pt) arc (90:180:5pt) -- (129pt,106pt) -- cycle;
\draw[pstyle1] (142pt,61pt) ellipse (9pt and 9pt);
\node at (142pt,61pt)[]{\textbf{\Large E}};
\node at (154pt,56pt)[below right,color=black,inner sep=0]{AIEmbeddingCriteria};
\draw[pstyle2] (130pt,75pt) -- (250.66pt,75pt);
\draw[pstyle1] (140pt,86pt) ellipse (3pt and 3pt);
\node at (147pt,79.5pt)[below right,color=black,inner sep=0]{key : SERIAL \guillemotleft{}PK\guillemotright{}};
\draw[pstyle2] (130pt,93pt) -- (250.66pt,93pt);
\node at (135pt,97pt)[below right,color=black,inner sep=0]{criteria : JSONB};
\draw[pstyle0] (262.5pt,17pt) arc (180:270:5pt) -- (267.5pt,12pt) -- (401.61pt,12pt) arc (270:360:5pt) -- (406.61pt,17pt) -- (406.61pt,141pt) arc (0:90:5pt) -- (401.61pt,146pt) -- (267.5pt,146pt) arc (90:180:5pt) -- (262.5pt,141pt) -- cycle;
\draw[pstyle1] (298.459pt,26pt) ellipse (9pt and 9pt);
\node at (298.459pt,26pt)[]{\textbf{\Large E}};
\node at (315.561pt,21pt)[below right,color=black,inner sep=0]{AIChatHistory};
\draw[pstyle2] (263.5pt,40pt) -- (405.61pt,40pt);
\draw[pstyle1] (273.5pt,51pt) ellipse (3pt and 3pt);
\node at (280.5pt,44.5pt)[below right,color=black,inner sep=0]{messageid : SERIAL \guillemotleft{}PK\guillemotright{}};
\draw[pstyle2] (263.5pt,58pt) -- (405.61pt,58pt);
\draw[pstyle1] (273.5pt,69pt) ellipse (3pt and 3pt);
\node at (280.5pt,62.5pt)[below right,color=black,inner sep=0]{chatid : UUID};
\draw[pstyle1] (273.5pt,80pt) ellipse (3pt and 3pt);
\node at (280.5pt,73.5pt)[below right,color=black,inner sep=0]{message : JSONB};
\draw[pstyle1] (273.5pt,91pt) ellipse (3pt and 3pt);
\node at (280.5pt,84.5pt)[below right,color=black,inner sep=0]{created : TIMESTAMP};
\draw[pstyle1] (273.5pt,102pt) ellipse (3pt and 3pt);
\node at (280.5pt,95.5pt)[below right,color=black,inner sep=0]{mode : TEXT};
\draw[pstyle1] (273.5pt,113pt) ellipse (3pt and 3pt);
\node at (280.5pt,106.5pt)[below right,color=black,inner sep=0]{userkey : INTEGER};
\node at (280.5pt,117pt)[below right,color=black,inner sep=0]{deleted : BOOLEAN};
\node at (280.5pt,127pt)[below right,color=black,inner sep=0]{uid : TEXT};
\node at (280.5pt,137pt)[below right,color=black,inner sep=0]{feedback : BOOLEAN};
\draw[pstyle0] (415pt,198pt) arc (180:270:5pt) -- (420pt,193pt) -- (493.36pt,193pt) arc (270:360:5pt) -- (498.36pt,198pt) -- (498.36pt,262pt) arc (0:90:5pt) -- (493.36pt,267pt) -- (420pt,267pt) arc (90:180:5pt) -- (415pt,262pt) -- cycle;
\draw[pstyle1] (428pt,207pt) ellipse (9pt and 9pt);
\node at (428pt,207pt)[]{\textbf{\Large E}};
\node at (440pt,202pt)[below right,color=black,inner sep=0]{SourceTypes};
\draw[pstyle2] (416pt,221pt) -- (497.36pt,221pt);
\node at (421pt,225pt)[below right,color=black,inner sep=0]{sovelia};
\node at (421pt,235pt)[below right,color=black,inner sep=0]{document360};
\node at (421pt,245pt)[below right,color=black,inner sep=0]{umbraco};
\draw[pstyle2] (416pt,259pt) -- (497.36pt,259pt);
\draw[pstyle0] (508pt,37pt) arc (180:270:5pt) -- (513pt,32pt) -- (668.42pt,32pt) arc (270:360:5pt) -- (673.42pt,37pt) -- (673.42pt,121pt) arc (0:90:5pt) -- (668.42pt,126pt) -- (513pt,126pt) arc (90:180:5pt) -- (508pt,121pt) -- cycle;
\draw[pstyle1] (556.295pt,46pt) ellipse (9pt and 9pt);
\node at (556.295pt,46pt)[]{\textbf{\Large E}};
\node at (573.795pt,41pt)[below right,color=black,inner sep=0]{AIDocSources};
\draw[pstyle2] (509pt,60pt) -- (672.42pt,60pt);
\draw[pstyle1] (519pt,71pt) ellipse (3pt and 3pt);
\node at (526pt,64.5pt)[below right,color=black,inner sep=0]{sourceid : TEXT \guillemotleft{}PK\guillemotright{}};
\draw[pstyle1] (519pt,82pt) ellipse (3pt and 3pt);
\node at (526pt,75.5pt)[below right,color=black,inner sep=0]{sourcetype : SourceTypes \guillemotleft{}PK\guillemotright{}};
\draw[pstyle2] (509pt,88pt) -- (672.42pt,88pt);
\node at (514pt,92pt)[below right,color=black,inner sep=0]{version : INTEGER};
\node at (514pt,102pt)[below right,color=black,inner sep=0]{title : TEXT};
\node at (514pt,112pt)[below right,color=black,inner sep=0]{url : TEXT};
\draw[pstyle0] (508pt,183pt) arc (180:270:5pt) -- (513pt,178pt) -- (668.14pt,178pt) arc (270:360:5pt) -- (673.14pt,183pt) -- (673.14pt,277pt) arc (0:90:5pt) -- (668.14pt,282pt) -- (513pt,282pt) arc (90:180:5pt) -- (508pt,277pt) -- cycle;
\draw[pstyle1] (556.165pt,192pt) ellipse (9pt and 9pt);
\node at (556.165pt,192pt)[]{\textbf{\Large E}};
\node at (573.665pt,187pt)[below right,color=black,inner sep=0]{AIDocChunks};
\draw[pstyle2] (509pt,206pt) -- (672.14pt,206pt);
\draw[pstyle1] (519pt,217pt) ellipse (3pt and 3pt);
\node at (526pt,210.5pt)[below right,color=black,inner sep=0]{chunkid : SERIAL \guillemotleft{}PK\guillemotright{}};
\draw[pstyle2] (509pt,224pt) -- (672.14pt,224pt);
\draw[pstyle1] (519pt,235pt) ellipse (3pt and 3pt);
\node at (526pt,228.5pt)[below right,color=black,inner sep=0]{sourceid : TEXT \guillemotleft{}FK\guillemotright{}};
\draw[pstyle1] (519pt,246pt) ellipse (3pt and 3pt);
\node at (526pt,239.5pt)[below right,color=black,inner sep=0]{sourcetype : SourceTypes \guillemotleft{}FK\guillemotright{}};
\draw[pstyle1] (519pt,257pt) ellipse (3pt and 3pt);
\node at (526pt,250.5pt)[below right,color=black,inner sep=0]{content : TEXT};
\draw[pstyle1] (519pt,268pt) ellipse (3pt and 3pt);
\node at (526pt,261.5pt)[below right,color=black,inner sep=0]{embedding : VECTOR(1536)};
\draw[pstyle1] (519pt,279pt) ellipse (3pt and 3pt);
\node at (526pt,272.5pt)[below right,color=black,inner sep=0]{chunkorder : INTEGER};
\draw[pstyle1] (516.5pt,303pt) -- (516.5pt,343pt) -- (516.5pt,343pt) -- (664.74pt,343pt) -- (664.74pt,343pt) -- (664.74pt,313pt) -- (654.74pt,303pt) -- (594.5pt,303pt) -- (590.5pt,282.09pt) -- (586.5pt,303pt) -- (516.5pt,303pt) -- (516.5pt,303pt);
\draw[pstyle1] (654.74pt,303pt) -- (654.74pt,313pt) -- (664.74pt,313pt) -- (654.74pt,303pt);
\node at (522.5pt,308pt)[below right,color=black,inner sep=0]{IVFFlat index on embedding};
\node at (522.5pt,318pt)[below right,color=black,inner sep=0]{using cosine distance};
\node at (522.5pt,328pt)[below right,color=black,inner sep=0]{for similarity search};
\draw[pstyle1] (264pt,210pt) -- (264pt,250pt) -- (264pt,250pt) -- (404.97pt,250pt) -- (404.97pt,250pt) -- (404.97pt,220pt) -- (394.97pt,210pt) -- (338.5pt,210pt) -- (334.5pt,146.22pt) -- (330.5pt,210pt) -- (264pt,210pt) -- (264pt,210pt);
\draw[pstyle1] (394.97pt,210pt) -- (394.97pt,220pt) -- (404.97pt,220pt) -- (394.97pt,210pt);
\node at (270pt,215pt)[below right,color=black,inner sep=0]{Stores conversation threads};
\node at (270pt,225pt)[below right,color=black,inner sep=0]{with user/AI messages};
\node at (270pt,235pt)[below right,color=black,inner sep=0]{and source references};
\draw[pstyle1] (683.5pt,210pt) -- (683.5pt,250pt) -- (683.5pt,250pt) -- (807.46pt,250pt) -- (807.46pt,250pt) -- (807.46pt,220pt) -- (797.46pt,210pt) -- (729.72pt,210pt) -- (638.69pt,126.33pt) -- (721.72pt,210pt) -- (683.5pt,210pt) -- (683.5pt,210pt);
\draw[pstyle1] (797.46pt,210pt) -- (797.46pt,220pt) -- (807.46pt,220pt) -- (797.46pt,210pt);
\node at (689.5pt,215pt)[below right,color=black,inner sep=0]{Tracks documentation};
\node at (689.5pt,225pt)[below right,color=black,inner sep=0]{from three source types};
\node at (689.5pt,235pt)[below right,color=black,inner sep=0]{with version control};
\draw[pstyle2] (590.5pt,134.33pt) ..controls (590.5pt,150.64pt) and (590.5pt,143.08pt) .. (590.5pt,159.77pt);
\draw[pstyle2] (586.5pt,130.33pt) -- (594.5pt,130.33pt);
\draw[pstyle2] (586.5pt,133.33pt) -- (594.5pt,133.33pt);
\draw[pstyle2] (590.5pt,134.33pt) -- (590.5pt,126.33pt);
\draw[pstyle2] (590.5pt,169.77pt) -- (596.5pt,177.77pt);
\draw[pstyle2] (590.5pt,169.77pt) -- (584.5pt,177.77pt);
\draw[pstyle2] (590.5pt,169.77pt) -- (590.5pt,177.77pt);
\draw[pstyle2] (590.5pt,163.77pt) ellipse (4pt and 4pt);
\node at (591.5pt,157pt)[below right,color=black,inner sep=0]{has many};
\draw[pstyle2] (536.8004pt,139.7109pt) ..controls (517.5904pt,161.0609pt) and (512.5081pt,166.7104pt) .. (494.5481pt,186.6904pt);
\draw[pstyle2] (543.4891pt,132.277pt) -- (544.3797pt,122.3168pt);
\draw[pstyle2] (543.4891pt,132.277pt) -- (553.3003pt,130.3432pt);
\draw[pstyle2] (543.4891pt,132.277pt) -- (548.84pt,126.33pt);
\draw[pstyle2] (539.4758pt,136.7373pt) ellipse (4pt and 4pt);
\draw[pstyle2] (494.8489pt,192.3392pt) -- (488.8992pt,186.9911pt);
\draw[pstyle2] (496.8544pt,190.1081pt) -- (490.9048pt,184.76pt);
\draw[pstyle2] (494.5481pt,186.6904pt) -- (489.2pt,192.64pt);
\node at (520.5pt,157pt)[below right,color=black,inner sep=0]{is type};
\end{tikzpicture}
