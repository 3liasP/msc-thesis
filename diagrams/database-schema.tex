% generated by Plantuml 1.2025.9       
\definecolor{plantucolor0000}{RGB}{227,242,253}
\definecolor{plantucolor0001}{RGB}{25,118,210}
\definecolor{plantucolor0002}{RGB}{255,255,255}
\definecolor{plantucolor0003}{RGB}{0,0,0}
\begin{tikzpicture}[yscale=-1
,pstyle0/.style={color=plantucolor0001,fill=plantucolor0000,line width=1.0pt}
,pstyle1/.style={color=black,fill=white,line width=1.0pt}
,pstyle2/.style={color=plantucolor0001,line width=1.0pt}
]
\draw[pstyle0] (898pt,52pt) arc (180:270:5pt) -- (903pt,47pt) -- (1000.06pt,47pt) arc (270:360:5pt) -- (1005.06pt,52pt) -- (1005.06pt,106pt) arc (0:90:5pt) -- (1000.06pt,111pt) -- (903pt,111pt) arc (90:180:5pt) -- (898pt,106pt) -- cycle;
\draw[pstyle1] (928.8245pt,61pt) ellipse (9pt and 9pt);
\node at (928.8245pt,61pt)[]{\textbf{\Large E}};
\node at (944.7855pt,56pt)[below right,color=black,inner sep=0]{AIConfig};
\draw[pstyle2] (899pt,75pt) -- (1004.06pt,75pt);
\draw[pstyle1] (909pt,86pt) ellipse (3pt and 3pt);
\node at (916pt,79.5pt)[below right,color=black,inner sep=0]{key : TEXT \guillemotleft{}PK\guillemotright{}};
\draw[pstyle2] (899pt,93pt) -- (1004.06pt,93pt);
\node at (904pt,97pt)[below right,color=black,inner sep=0]{value : TEXT};
\draw[pstyle0] (1040pt,52pt) arc (180:270:5pt) -- (1045pt,47pt) -- (1157.66pt,47pt) arc (270:360:5pt) -- (1162.66pt,52pt) -- (1162.66pt,106pt) arc (0:90:5pt) -- (1157.66pt,111pt) -- (1045pt,111pt) arc (90:180:5pt) -- (1040pt,106pt) -- cycle;
\draw[pstyle1] (1053pt,61pt) ellipse (9pt and 9pt);
\node at (1053pt,61pt)[]{\textbf{\Large E}};
\node at (1065pt,56pt)[below right,color=black,inner sep=0]{AIEmbeddingCriteria};
\draw[pstyle2] (1041pt,75pt) -- (1161.66pt,75pt);
\draw[pstyle1] (1051pt,86pt) ellipse (3pt and 3pt);
\node at (1058pt,79.5pt)[below right,color=black,inner sep=0]{key : SERIAL \guillemotleft{}PK\guillemotright{}};
\draw[pstyle2] (1041pt,93pt) -- (1161.66pt,93pt);
\node at (1046pt,97pt)[below right,color=black,inner sep=0]{criteria : JSONB};
\draw[pstyle0] (542.5pt,17pt) arc (180:270:5pt) -- (547.5pt,12pt) -- (681.61pt,12pt) arc (270:360:5pt) -- (686.61pt,17pt) -- (686.61pt,141pt) arc (0:90:5pt) -- (681.61pt,146pt) -- (547.5pt,146pt) arc (90:180:5pt) -- (542.5pt,141pt) -- cycle;
\draw[pstyle1] (578.459pt,26pt) ellipse (9pt and 9pt);
\node at (578.459pt,26pt)[]{\textbf{\Large E}};
\node at (595.561pt,21pt)[below right,color=black,inner sep=0]{AIChatHistory};
\draw[pstyle2] (543.5pt,40pt) -- (685.61pt,40pt);
\draw[pstyle1] (553.5pt,51pt) ellipse (3pt and 3pt);
\node at (560.5pt,44.5pt)[below right,color=black,inner sep=0]{messageid : SERIAL \guillemotleft{}PK\guillemotright{}};
\draw[pstyle2] (543.5pt,58pt) -- (685.61pt,58pt);
\draw[pstyle1] (553.5pt,69pt) ellipse (3pt and 3pt);
\node at (560.5pt,62.5pt)[below right,color=black,inner sep=0]{chatid : UUID};
\draw[pstyle1] (553.5pt,80pt) ellipse (3pt and 3pt);
\node at (560.5pt,73.5pt)[below right,color=black,inner sep=0]{message : JSONB};
\draw[pstyle1] (553.5pt,91pt) ellipse (3pt and 3pt);
\node at (560.5pt,84.5pt)[below right,color=black,inner sep=0]{created : TIMESTAMP};
\draw[pstyle1] (553.5pt,102pt) ellipse (3pt and 3pt);
\node at (560.5pt,95.5pt)[below right,color=black,inner sep=0]{mode : TEXT};
\draw[pstyle1] (553.5pt,113pt) ellipse (3pt and 3pt);
\node at (560.5pt,106.5pt)[below right,color=black,inner sep=0]{userkey : INTEGER};
\node at (560.5pt,117pt)[below right,color=black,inner sep=0]{deleted : BOOLEAN};
\node at (560.5pt,127pt)[below right,color=black,inner sep=0]{uid : TEXT};
\node at (560.5pt,137pt)[below right,color=black,inner sep=0]{feedback : BOOLEAN};
\draw[pstyle0] (396pt,238pt) arc (180:270:5pt) -- (401pt,233pt) -- (474.36pt,233pt) arc (270:360:5pt) -- (479.36pt,238pt) -- (479.36pt,302pt) arc (0:90:5pt) -- (474.36pt,307pt) -- (401pt,307pt) arc (90:180:5pt) -- (396pt,302pt) -- cycle;
\draw[pstyle1] (409pt,247pt) ellipse (9pt and 9pt);
\node at (409pt,247pt)[]{\textbf{\Large E}};
\node at (421pt,242pt)[below right,color=black,inner sep=0]{SourceTypes};
\draw[pstyle2] (397pt,261pt) -- (478.36pt,261pt);
\node at (402pt,265pt)[below right,color=black,inner sep=0]{sovelia};
\node at (402pt,275pt)[below right,color=black,inner sep=0]{document360};
\node at (402pt,285pt)[below right,color=black,inner sep=0]{umbraco};
\draw[pstyle2] (397pt,299pt) -- (478.36pt,299pt);
\draw[pstyle0] (183pt,37pt) arc (180:270:5pt) -- (188pt,32pt) -- (343.42pt,32pt) arc (270:360:5pt) -- (348.42pt,37pt) -- (348.42pt,121pt) arc (0:90:5pt) -- (343.42pt,126pt) -- (188pt,126pt) arc (90:180:5pt) -- (183pt,121pt) -- cycle;
\draw[pstyle1] (231.295pt,46pt) ellipse (9pt and 9pt);
\node at (231.295pt,46pt)[]{\textbf{\Large E}};
\node at (248.795pt,41pt)[below right,color=black,inner sep=0]{AIDocSources};
\draw[pstyle2] (184pt,60pt) -- (347.42pt,60pt);
\draw[pstyle1] (194pt,71pt) ellipse (3pt and 3pt);
\node at (201pt,64.5pt)[below right,color=black,inner sep=0]{sourceid : TEXT \guillemotleft{}PK\guillemotright{}};
\draw[pstyle1] (194pt,82pt) ellipse (3pt and 3pt);
\node at (201pt,75.5pt)[below right,color=black,inner sep=0]{sourcetype : SourceTypes \guillemotleft{}PK\guillemotright{}};
\draw[pstyle2] (184pt,88pt) -- (347.42pt,88pt);
\node at (189pt,92pt)[below right,color=black,inner sep=0]{version : INTEGER};
\node at (189pt,102pt)[below right,color=black,inner sep=0]{title : TEXT};
\node at (189pt,112pt)[below right,color=black,inner sep=0]{url : TEXT};
\draw[pstyle0] (12pt,223pt) arc (180:270:5pt) -- (17pt,218pt) -- (172.14pt,218pt) arc (270:360:5pt) -- (177.14pt,223pt) -- (177.14pt,317pt) arc (0:90:5pt) -- (172.14pt,322pt) -- (17pt,322pt) arc (90:180:5pt) -- (12pt,317pt) -- cycle;
\draw[pstyle1] (60.165pt,232pt) ellipse (9pt and 9pt);
\node at (60.165pt,232pt)[]{\textbf{\Large E}};
\node at (77.665pt,227pt)[below right,color=black,inner sep=0]{AIDocChunks};
\draw[pstyle2] (13pt,246pt) -- (176.14pt,246pt);
\draw[pstyle1] (23pt,257pt) ellipse (3pt and 3pt);
\node at (30pt,250.5pt)[below right,color=black,inner sep=0]{chunkid : SERIAL \guillemotleft{}PK\guillemotright{}};
\draw[pstyle2] (13pt,264pt) -- (176.14pt,264pt);
\draw[pstyle1] (23pt,275pt) ellipse (3pt and 3pt);
\node at (30pt,268.5pt)[below right,color=black,inner sep=0]{sourceid : TEXT \guillemotleft{}FK\guillemotright{}};
\draw[pstyle1] (23pt,286pt) ellipse (3pt and 3pt);
\node at (30pt,279.5pt)[below right,color=black,inner sep=0]{sourcetype : SourceTypes \guillemotleft{}FK\guillemotright{}};
\draw[pstyle1] (23pt,297pt) ellipse (3pt and 3pt);
\node at (30pt,290.5pt)[below right,color=black,inner sep=0]{content : TEXT};
\draw[pstyle1] (23pt,308pt) ellipse (3pt and 3pt);
\node at (30pt,301.5pt)[below right,color=black,inner sep=0]{embedding : VECTOR(1536)};
\draw[pstyle1] (23pt,319pt) ellipse (3pt and 3pt);
\node at (30pt,312.5pt)[below right,color=black,inner sep=0]{chunkorder : INTEGER};
\draw[pstyle1] (212.5pt,250pt) -- (212.5pt,266pt) -- (177.38pt,270pt) -- (212.5pt,274pt) -- (212.5pt,290pt) -- (212.5pt,290pt) -- (360.74pt,290pt) -- (360.74pt,290pt) -- (360.74pt,260pt) -- (350.74pt,250pt) -- (212.5pt,250pt) -- (212.5pt,250pt);
\draw[pstyle1] (350.74pt,250pt) -- (350.74pt,260pt) -- (360.74pt,260pt) -- (350.74pt,250pt);
\node at (218.5pt,255pt)[below right,color=black,inner sep=0]{IVFFlat index on embedding};
\node at (218.5pt,265pt)[below right,color=black,inner sep=0]{using cosine distance};
\node at (218.5pt,275pt)[below right,color=black,inner sep=0]{for similarity search};
\draw[pstyle1] (722pt,59pt) -- (722pt,75pt) -- (686.81pt,79pt) -- (722pt,83pt) -- (722pt,99pt) -- (722pt,99pt) -- (862.97pt,99pt) -- (862.97pt,99pt) -- (862.97pt,69pt) -- (852.97pt,59pt) -- (722pt,59pt) -- (722pt,59pt);
\draw[pstyle1] (852.97pt,59pt) -- (852.97pt,69pt) -- (862.97pt,69pt) -- (852.97pt,59pt);
\node at (728pt,64pt)[below right,color=black,inner sep=0]{Stores conversation threads};
\node at (728pt,74pt)[below right,color=black,inner sep=0]{with user/AI messages};
\node at (728pt,84pt)[below right,color=black,inner sep=0]{and source references};
\draw[pstyle1] (383.5pt,59pt) -- (383.5pt,75pt) -- (348.12pt,79pt) -- (383.5pt,83pt) -- (383.5pt,99pt) -- (383.5pt,99pt) -- (507.46pt,99pt) -- (507.46pt,99pt) -- (507.46pt,69pt) -- (497.46pt,59pt) -- (383.5pt,59pt) -- (383.5pt,59pt);
\draw[pstyle1] (497.46pt,59pt) -- (497.46pt,69pt) -- (507.46pt,69pt) -- (497.46pt,59pt);
\node at (389.5pt,64pt)[below right,color=black,inner sep=0]{Tracks documentation};
\node at (389.5pt,74pt)[below right,color=black,inner sep=0]{from three source types};
\node at (389.5pt,84pt)[below right,color=black,inner sep=0]{with version control};
\draw[pstyle2] (218.3022pt,132.1619pt) ..controls (193.1822pt,159.9219pt) and (178.6469pt,176.0028pt) .. (152.7869pt,204.5828pt);
\draw[pstyle2] (218.0202pt,126.5121pt) -- (223.9521pt,131.8798pt);
\draw[pstyle2] (216.0073pt,128.7365pt) -- (221.9392pt,134.1043pt);
\draw[pstyle2] (218.3022pt,132.1619pt) -- (223.67pt,126.23pt);
\draw[pstyle2] (146.0775pt,211.9979pt) -- (145.1591pt,221.9556pt);
\draw[pstyle2] (146.0775pt,211.9979pt) -- (136.2609pt,213.9044pt);
\draw[pstyle2] (146.0775pt,211.9979pt) -- (140.71pt,217.93pt);
\draw[pstyle2] (150.1032pt,207.5488pt) ellipse (4pt and 4pt);
\node at (176.5pt,177pt)[below right,color=black,inner sep=0]{has many};
\draw[pstyle2] (319.6928pt,139.5447pt) ..controls (349.5228pt,172.3347pt) and (371.5049pt,196.4838pt) .. (399.0849pt,226.7838pt);
\draw[pstyle2] (312.9634pt,132.1476pt) -- (303.1418pt,130.2676pt);
\draw[pstyle2] (312.9634pt,132.1476pt) -- (312.0182pt,122.1924pt);
\draw[pstyle2] (312.9634pt,132.1476pt) -- (307.58pt,126.23pt);
\draw[pstyle2] (317.001pt,136.5859pt) ellipse (4pt and 4pt);
\draw[pstyle2] (404.7355pt,227.0494pt) -- (398.8194pt,232.4345pt);
\draw[pstyle2] (402.7161pt,224.8308pt) -- (396.8pt,230.2159pt);
\draw[pstyle2] (399.0849pt,226.7838pt) -- (404.47pt,232.7pt);
\node at (362.5pt,177pt)[below right,color=black,inner sep=0]{is type};
\end{tikzpicture}
